# 一、网络协议概述
网络协议是计算机网络中进行数据交换而建立的规则、标准或约定的集合。
1. 网络协议三要素：
    * 语义
    * 语法
    * 时序

2. 作用： 确保计算机之间能够进行有效的通信，规定了通信时信息 <font color=red>必须采用的格式和这个格式的意义，以及如何发送和接收数据</font>，以确保数据能可靠的传输到目标地址

3. 计算机网络中，不同的协议用于不同的网络层，如 TCP/IP,HTTP,FTP等，这些协议在传输层和网络层中定义
    * 网络层协议：<font color=red>IP 协议、ARP协议、RARP协议</font>
    * 传输层协议：<font color=red>TCP协议、UD协议</font>
    * 应用层协议：<font color=red>HTTP、HTTPS、FTP、POP3、SMTP、SNMP、RDP、NTP、SSH、SIP、Telnet</font>
***

# 二、常见的网络协议

## <一>、网络层协议

### 1.1 IP 协议
IP协议（互联网协议）是TCP/IP 协议的核心协议。定义了数据报的格式，使得数据包可以在互联网中进行传输。
* IP 协议使用IP地址进行寻址，并通过路由选择算法将数据包从源节点转发到目标节点

### 1.2 ARP 协议
ARP(Address Resolution Protocol)(地址解析协议)，作用是在以太网环境总，数据的传输所以来的是MAC地址而非IP地址。
* 将已知的ip地址转化为MAC地址的工作是由APR协议完成的

### 1.3 RARP 协议
RARP 是从MAC 地址定位IP地址的一种协议，我们平时可以通过设置电脑IP，也可以通过DHCP自动分配获取ip地址



## <二>、 传输层协议
### 2.1 TCP 协议
TCP 是 `传输控制协议`，提供 可靠的、面向连接的、基于字节流数据传输服务。
#### 2.2.1 TCP的特点
* 面向连接、可靠的数据传输、流量控制、拥塞控制和错误控制等

#### 2.1.2 基础概念
* <font color=green>TIME_WATI 状态:</font> TIME_WAIT 状态是连接释放过程中的一个状态，当一方发送完最后一个ACK报文后，会进入 TIME_WAIT 状态，等待一段时间以确保对方接收到自己的ACK报文。这个状态可以避免出现重复连接的情况，保证连接的可靠性
* <font color=green>MSS(Maximum Segment Size):</font> 指TCP段的最大长度，它是TCP 协议中定义的一个参数，用于限制连接时TCP段的数据长度。
    - mms 的大小取决于IP 数据报和TCP头部的最大长度。
    - 在建立TCP 连接时，双方会协商MSS的大小，以便在传输数据时能更有效地利用带宽，避免丢包等问题
* <font color=green>SYN 队列:</font> 指在建立TCP 连接时使用的一个队列，存储等待处理的连接报文，以便服务器能够按照顺序处理这些请求并建立连接
* <font color=green>TIME_WAIT、SYN之间的关系：</font> 当一方关闭连接时，它会发送一个FIN报文请求关闭连接。另一方接收到FIN报文之后也会关闭连接并回一个 ACK 报文确认收到请求。如果一方在发送完最后ACK报文后进入 TIME_WAIT 状态等待一段时间确保对方接收到自己的ACK保本，而另一方在这段时间内又发送了一个新的SYN保本请求建立新的连接，那么这个新的SYN 报文会被放入SYN队列中等待处理。

#### 2.1.3 TCP 工作原理
* TCP 通过`面相连接`的方式建立虚电路，确保数据传输的可靠性和顺序的正确性。
* 使用`确认机制、重传机制和窗口机制`来保证数据传输的可靠性
* TCP 还具有`流量控制和拥塞控制机制`，能够更具网络状况动态调整数据传输速率，避免网络拥塞和丢包问题

#### 2.1.4 三次握手
* 客户端向服务端发送一个<font color=red>请求建立连接</font>的 `SYN` 报文
* 服务器接收到 `SYN` 报文之后，会给客户端返回一个 `SYN+ACK` 的报文，表示<font color=red>同意建立连接</font>
* 客户端端接收到 `SYN+ACK` 报文之后，再向服务端发送一个 `ACK` 报文，表示<font color=red>确认连接建立</font>


#### 2.1.5 四次挥手
* 当一方A想关闭连接的时候，会发送一个 `FIN` 报文，<font color=red>请求关闭连接</font>
* 另一方B接收到 `FIN` 报文之后，会回复一个 `ACK` 报文，进入TIME_WAIT状态,表示 <font color=red>确认收到关闭请求</font>
* 然后A可以发送一个 `FIN` 报文，表示<font color=red>关闭连接</font>
* B 接收到 `FIN` 报文之后，`待处理完剩余的传输任务`之后，关闭连接，然后向 A 发送一个 `ACK` 报文，表示<font color=red>确认连接关闭的</font>

#### 2.1.6 TCP协议中的流量控制和拥塞控制机制
* TCP 中的流量控制机制通过 <font color=red>滑动窗口协议实现</font>。它通过动态调整窗口大小来控制发送方发送数据的速率，以避免接收方来不及接受数据而造成数据丢失
* TCP 中的拥塞控制机制通过 <font color=red>拥塞避免算法和拥塞窗口机制实现</font>。它通过动态调整窗口大小来控制发送方发送的速率，以避免网络拥塞发生 


#### 2.1.7 如何处理丢包和延时？
* TCP 中处理延时和丢包的情况主要依靠`重传机制`和`拥塞机制`来实现 
* 当接收方未收到数据是，会发送一个 `NAK 或者 RST` 报文给发送方要求`重传数据或者关闭连接`
* 同时，TCP 还会`动态调整拥塞窗口`的大小以避免网络拥塞的发生，并减少丢包的可能性
* 此外， TCP 还采用 `快速重传和快速回复等算法` 来快速处理丢包和延迟的情况，提高数据传输的效率和可靠性

#### 2.1.8 如何保证数据传输的可靠性和顺序性
* TCP 中，为了保证数据传输的可靠性和顺序的正确性，主要采用 <font color=red>确认机制、重传机制、序列号机制和流量控制机制</font> 等机制来实现
* 通过 `确认机制` 和 `重传机制` 保证数据能够可靠地传输到接收方
* 通过 `序列号机制` 保证数据能够按照发送的顺序进行接收
* 通过 `流量控制机制` 避免接收方来不及接受数据而造成数据丢失或者重复接收的情况发生


### 2.2 UDP 协议
UDP 是 `用户数据报协议`， 提供无连接的数据传输服务。UDP 在传输数据之前不需要建立连接，页不提供数据包的重传价值。适用于实时性要求高的应用（音视频传输、实时游戏）

#### 2.2.1 UDP 和 TCP 的区别
* UDP 和 TCP  的主要区别在于传输方式和可靠性
* UDP 提供了一种简单的方式来发送和接收数据，但是不提供任何可靠性和顺序保证，可能会出现数据丢失、重复和乱序的情况
* UDP 只需要知道接收方的 ip 和端口好即可，传输时即时性的，不用事先建立连接

#### 2.2.2 UDP 的特点和应用场景
* 特点： 简单、无连接、不可靠、支持一对一、一对多，多对一和多对多的交互通信
* 应用： 广泛应用于一些不需要可靠传输的场景，如流媒体、VoIP（语音通话）和 DNS 查询

#### 2.2.3 UDP 头部结构是什么？有哪些字段
* 头部结构包含四个字段: 源端口、目的端口、长度和校验和
* `源端口` 和 `目的端口`用于标识和接收UDP 数据报的应用程序
* `长度字段` 表示 UDP头部和数据的总长度
* `校验和` 用于检测数据在传输过程中是否发生错误 

#### 2.2.4 UDP 通信过程
* 发送方应用程序将数据打包成UDP数据报，并指定目的端的IP地址和端口号
* UDP将数据报发送到网络中，并尽力将其传递到目的端
* 接收方接收到数据之后会进行相应的处理

#### 2.2.5 UDP 有哪些传输模式，特点是什么
* UDP 传播模式主要包括 单播、广播和组播
* `单播`： 一个源端发送数据到单个目的端， 适用于 点对点通信
* `广播`:  一个源端发送数据到网络中的所有设备中， 适用于 向大量设备发送相同数据
* `组播`： 一个源端发送数据到一个特定的组中， 适用于 向一组特定设备发送数据


## <三>、应用层协议
### 3.1 HTTP 协议
HTTP 是 `超文本传输协议`， 用于在web浏览器和服务器之间传输超文本数据

### 3.2 HTTPS 协议
HTTPS 是 `安全套接层超文本传输协议`， 是HTTP 的安全版本，使用加密来保护数据传输的安全性

### 3.3 SSH 协议
SSH 是 `安全外壳协议`, 用于安全登录到服务器或者网络设备，以加密数据传输和身份认证

### 3.4 FTP 协议
FTP 是 `文件传输协议`, 用于在网络上传输文件，使用户可以上传或者下载文件到远程服务器

### 3.5 POP3 协议 和 IMAP 协议
POP3 是 `邮局协议版本3` ， IMAP 是 `Internet 消息访问协议`, 用于接收电子邮价，分本用于从服务器下载邮件或者在服务器上管理邮件

### 3.6 SMTP 协议
SMTP 是 `简单邮件传输协议`， 主要用于电子邮件的发送，规定了邮件客户端和邮件服务器之间的交互方式

### 3.7 Telnet
Telnet 用于在网络上远程登录到其他计算机，以便进行远程控制和管理

### 3.8 SNMP
SNMP 是 `简单网络管理协议`， 用于网络设备之间的监控和管理，例如路由器、交换机等。

## 3.9 RDP
RDP 是 `远程桌面协议`， 用于在计算机上显示和控制图形桌面

### 3.10 NTP 
NTP 是 `网络时间协议`， 用于同步网络中计算机的时间，确保各设备具有统一的时间标准

### 3.11 SIP 
SIP 是 `会话发起协议`， 用于建立、修改和中止多媒体会话，如 语音通话、视频通话等
